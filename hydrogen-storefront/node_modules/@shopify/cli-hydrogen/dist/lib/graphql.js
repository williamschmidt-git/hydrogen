import { graphqlRequest } from '@shopify/cli-kit/node/api/graphql';
import { AbortError } from '@shopify/cli-kit/node/error';

async function adminRequest(query, session, variables) {
  const api = "Admin";
  const url = `https://${session.storeFqdn}/admin/api/unstable/graphql.json`;
  return graphqlRequest({ query, api, url, token: session.token, variables });
}
const GID_REGEXP = /gid:\/\/shopify\/\w*\/(\d+)/;
function parseGid(gid) {
  const matches = GID_REGEXP.exec(gid);
  if (matches && matches[1] !== void 0) {
    return matches[1];
  }
  throw new AbortError(`Invalid Global ID: ${gid}`);
}

export { adminRequest, parseGid };
